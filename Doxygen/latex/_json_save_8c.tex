\hypertarget{_json_save_8c}{\section{Référence du fichier src/\-Model/\-Json\-Save.c}
\label{_json_save_8c}\index{src/\-Model/\-Json\-Save.\-c@{src/\-Model/\-Json\-Save.\-c}}
}
{\ttfamily \#include \char`\"{}G\-P\-Calendar/\-Model/\-Json\-Save.\-h\char`\"{}}\\*
Graphe des dépendances par inclusion de Json\-Save.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{_json_save_8c__incl}
\end{center}
\end{figure}
\subsection*{Fonctions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{struct_project}{Project} $\ast$ \hyperlink{_json_save_8c_a7a5fb57d9f83d9045fb81b7e6f470d38}{Creer\-Project} (char $\ast$nom, \hyperlink{struct_list_medecin}{List\-Medecin} $\ast$working\-Medecins, \hyperlink{struct_list_patient}{List\-Patient} $\ast$consulting\-Patient, \hyperlink{calendrier_8h_ab8644d1026df84be3eb3190cf1ef29fa}{Calendrier} calendrier)
\item 
void \hyperlink{_json_save_8c_aa85ffed3ee8b72ca163b8d3fef2e9c33}{free\-Project} (\hyperlink{struct_project}{Project} $\ast$project)
\item 
void \hyperlink{_json_save_8c_afe4c4f44b2d76f6636292c34aa2d261c}{print\-Project} (\hyperlink{struct_project}{Project} $\ast$p)
\item 
int \hyperlink{_json_save_8c_afd3a46e70eacecdc397b8b59c5329ed1}{G\-P\-Calendar\-\_\-save\-Project} (char $\ast$nom\-Fichier, \hyperlink{struct_project}{Project} $\ast$project)
\item 
char $\ast$ \hyperlink{_json_save_8c_a966e383a442f97746ebb82704990d54c}{Project\-\_\-json\-Save} (\hyperlink{struct_project}{Project} $\ast$project)
\item 
int \hyperlink{_json_save_8c_a5c37b29882e21010d74cec620f423f85}{List\-Medecin\-\_\-json\-Save} (c\-J\-S\-O\-N $\ast$list\-Medecin\-Json, \hyperlink{struct_list_medecin}{List\-Medecin} $\ast$l)
\item 
int \hyperlink{_json_save_8c_ad49c020d48062643c39895ecc2d28e4f}{List\-Patient\-\_\-json\-Save} (c\-J\-S\-O\-N $\ast$list\-Patient\-Json, \hyperlink{struct_list_patient}{List\-Patient} $\ast$l)
\item 
int \hyperlink{_json_save_8c_a21e1346bc98e5298a55c6ea50e3c94b5}{Calendrier\-\_\-json\-Save} (c\-J\-S\-O\-N $\ast$calendrier\-Json, \hyperlink{calendrier_8h_ab8644d1026df84be3eb3190cf1ef29fa}{Calendrier} c)
\item 
\hyperlink{struct_project}{Project} $\ast$ \hyperlink{_json_save_8c_ac99dc1f99b61430d18c89660bfbdf961}{G\-P\-Calendar\-\_\-load\-Project} (char $\ast$nom\-Fichier)
\item 
\hyperlink{struct_project}{Project} $\ast$ \hyperlink{_json_save_8c_ab8a5a77e70ea005cf7878c0c228bd03a}{Project\-\_\-json\-Load} (const char $\ast$const content)
\item 
int \hyperlink{_json_save_8c_a7ac94075c9d7b1d6573cec905d025176}{List\-Medecin\-\_\-json\-Load} (c\-J\-S\-O\-N $\ast$project\-Json, \hyperlink{struct_list_medecin}{List\-Medecin} $\ast$l\-M)
\item 
int \hyperlink{_json_save_8c_a3bea4ff78d8287423643ba3e76f155cd}{List\-Patient\-\_\-json\-Load} (c\-J\-S\-O\-N $\ast$project\-Json, \hyperlink{struct_list_medecin}{List\-Medecin} $\ast$project\-\_\-working\-Medecins, \hyperlink{struct_list_patient}{List\-Patient} $\ast$l\-P)
\item 
int \hyperlink{_json_save_8c_a43e66b4e9f5568407bddd301964a9467}{Calendrier\-\_\-json\-Load} (c\-J\-S\-O\-N $\ast$project\-Json, \hyperlink{struct_list_medecin}{List\-Medecin} $\ast$l\-M, \hyperlink{struct_list_patient}{List\-Patient} $\ast$l\-P, \hyperlink{calendrier_8h_ab8644d1026df84be3eb3190cf1ef29fa}{Calendrier} c)
\item 
int \hyperlink{_json_save_8c_a1ec8960dcf28186191a304cdc4829573}{supports\-\_\-full\-\_\-hd} (const char $\ast$const monitor)
\end{DoxyCompactItemize}


\subsection{Documentation des fonctions}
\hypertarget{_json_save_8c_a43e66b4e9f5568407bddd301964a9467}{\index{Json\-Save.\-c@{Json\-Save.\-c}!Calendrier\-\_\-json\-Load@{Calendrier\-\_\-json\-Load}}
\index{Calendrier\-\_\-json\-Load@{Calendrier\-\_\-json\-Load}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{Calendrier\-\_\-json\-Load}]{\setlength{\rightskip}{0pt plus 5cm}int Calendrier\-\_\-json\-Load (
\begin{DoxyParamCaption}
\item[{c\-J\-S\-O\-N $\ast$}]{project\-Json, }
\item[{{\bf List\-Medecin} $\ast$}]{l\-M, }
\item[{{\bf List\-Patient} $\ast$}]{l\-P, }
\item[{{\bf Calendrier}}]{c}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_a43e66b4e9f5568407bddd301964a9467}
\hypertarget{_json_save_8c_a21e1346bc98e5298a55c6ea50e3c94b5}{\index{Json\-Save.\-c@{Json\-Save.\-c}!Calendrier\-\_\-json\-Save@{Calendrier\-\_\-json\-Save}}
\index{Calendrier\-\_\-json\-Save@{Calendrier\-\_\-json\-Save}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{Calendrier\-\_\-json\-Save}]{\setlength{\rightskip}{0pt plus 5cm}int Calendrier\-\_\-json\-Save (
\begin{DoxyParamCaption}
\item[{c\-J\-S\-O\-N $\ast$}]{calendrier\-Json, }
\item[{{\bf Calendrier}}]{c}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_a21e1346bc98e5298a55c6ea50e3c94b5}
Calendrier\-\_\-json\-Save \-: fonction qui écrit dans un objet c\-Json une liste de Rendez-\/vous (triée chronologiquement) 
\begin{DoxyParams}{Paramètres}
{\em calendrier\-Json} & \-: l'objet c\-J\-S\-O\-N dans lequel on sauvegarde le calendrier \\
\hline
{\em c} & \-: le calendrier à save \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
1 si tout s'est bien passé 0 sinon 
\end{DoxyReturn}
Avec les 4 boucles for qui suivent on vient chercher tous les rdv\hypertarget{_json_save_8c_a7a5fb57d9f83d9045fb81b7e6f470d38}{\index{Json\-Save.\-c@{Json\-Save.\-c}!Creer\-Project@{Creer\-Project}}
\index{Creer\-Project@{Creer\-Project}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{Creer\-Project}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Project}$\ast$ Creer\-Project (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{nom, }
\item[{{\bf List\-Medecin} $\ast$}]{working\-Medecins, }
\item[{{\bf List\-Patient} $\ast$}]{consulting\-Patient, }
\item[{{\bf Calendrier}}]{calendrier}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_a7a5fb57d9f83d9045fb81b7e6f470d38}
\hypertarget{_json_save_8c_aa85ffed3ee8b72ca163b8d3fef2e9c33}{\index{Json\-Save.\-c@{Json\-Save.\-c}!free\-Project@{free\-Project}}
\index{free\-Project@{free\-Project}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{free\-Project}]{\setlength{\rightskip}{0pt plus 5cm}void free\-Project (
\begin{DoxyParamCaption}
\item[{{\bf Project} $\ast$}]{project}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_aa85ffed3ee8b72ca163b8d3fef2e9c33}
free\-Project \-: Free entièrement un projet, à savoir \-:
\begin{DoxyItemize}
\item le calendrier de l'hopital (et donc tous les rdv qui le composent)
\item les médecins de l'hopital qui ont été rentrés dans la liste working\-Medecins
\item les patients de l'hopital qui ont été rentrés dans la liste consulting\-Patients et donc leur dossier médical et leurs ordonnances 
\begin{DoxyParams}{Paramètres}
{\em project} & \-: le projet à free \\
\hline
\end{DoxyParams}

\end{DoxyItemize}\hypertarget{_json_save_8c_ac99dc1f99b61430d18c89660bfbdf961}{\index{Json\-Save.\-c@{Json\-Save.\-c}!G\-P\-Calendar\-\_\-load\-Project@{G\-P\-Calendar\-\_\-load\-Project}}
\index{G\-P\-Calendar\-\_\-load\-Project@{G\-P\-Calendar\-\_\-load\-Project}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{G\-P\-Calendar\-\_\-load\-Project}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Project}$\ast$ G\-P\-Calendar\-\_\-load\-Project (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{nom\-Fichier}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_ac99dc1f99b61430d18c89660bfbdf961}
G\-P\-Calendar\-\_\-load\-Project \-: fonction récupérant les données d'un projet depuis un fichier au format J\-S\-O\-N 
\begin{DoxyParams}{Paramètres}
{\em nom\-Fichier} & \-: le fichier depuis lequel on récupère les données \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
un pointeur sur le projet créé avec les données J\-S\-O\-N 
\end{DoxyReturn}
\hypertarget{_json_save_8c_afd3a46e70eacecdc397b8b59c5329ed1}{\index{Json\-Save.\-c@{Json\-Save.\-c}!G\-P\-Calendar\-\_\-save\-Project@{G\-P\-Calendar\-\_\-save\-Project}}
\index{G\-P\-Calendar\-\_\-save\-Project@{G\-P\-Calendar\-\_\-save\-Project}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{G\-P\-Calendar\-\_\-save\-Project}]{\setlength{\rightskip}{0pt plus 5cm}int G\-P\-Calendar\-\_\-save\-Project (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{nom\-Fichier, }
\item[{{\bf Project} $\ast$}]{project}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_afd3a46e70eacecdc397b8b59c5329ed1}
Pour l'instant On ne sauvegarde pas les diplomes et spécialités des médecins ainsi que les antécédents des Dossier\-Médicaux G\-P\-Calendar\-\_\-save\-Project \-: Sauvegarde un projet (liste de médecins, patients et un calendrier) sous forme de fichier texte au format J\-S\-O\-N 
\begin{DoxyParams}{Paramètres}
{\em nom\-Fichier} & \-: le nom du fichier qui contiendra les données au format J\-S\-O\-N \\
\hline
{\em project} & \-: le projet à sauvegarder \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
1 si tout s'est bien passé 0 sinon (erreur d'ouverture de fichier ou de parsing \-: Cf c\-J\-S\-O\-N) 
\end{DoxyReturn}
\hypertarget{_json_save_8c_a7ac94075c9d7b1d6573cec905d025176}{\index{Json\-Save.\-c@{Json\-Save.\-c}!List\-Medecin\-\_\-json\-Load@{List\-Medecin\-\_\-json\-Load}}
\index{List\-Medecin\-\_\-json\-Load@{List\-Medecin\-\_\-json\-Load}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{List\-Medecin\-\_\-json\-Load}]{\setlength{\rightskip}{0pt plus 5cm}int List\-Medecin\-\_\-json\-Load (
\begin{DoxyParamCaption}
\item[{c\-J\-S\-O\-N $\ast$}]{project\-Json, }
\item[{{\bf List\-Medecin} $\ast$}]{l\-M}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_a7ac94075c9d7b1d6573cec905d025176}
List\-Medecin\-\_\-json\-Load \-: Load depuis un objet c\-J\-S\-O\-N une liste de médecins 
\begin{DoxyParams}{Paramètres}
{\em project\-Json} & \-: l'objet c\-J\-S\-O\-N contenant les données pour la liste de médecins \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
1 si tout s'est bien passé 0 sinon 
\end{DoxyReturn}
\hypertarget{_json_save_8c_a5c37b29882e21010d74cec620f423f85}{\index{Json\-Save.\-c@{Json\-Save.\-c}!List\-Medecin\-\_\-json\-Save@{List\-Medecin\-\_\-json\-Save}}
\index{List\-Medecin\-\_\-json\-Save@{List\-Medecin\-\_\-json\-Save}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{List\-Medecin\-\_\-json\-Save}]{\setlength{\rightskip}{0pt plus 5cm}int List\-Medecin\-\_\-json\-Save (
\begin{DoxyParamCaption}
\item[{c\-J\-S\-O\-N $\ast$}]{list\-Medecin\-Json, }
\item[{{\bf List\-Medecin} $\ast$}]{l}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_a5c37b29882e21010d74cec620f423f85}
List\-Medecin\-\_\-json\-Save \-: fonction qui écrit dans un objet c\-Json une liste de médecins Chaque médecin possédant une liste de patients recus, on écrira uniquement l'I\-D de ces patients (= leur numéro de sécurité social) dans cette liste 
\begin{DoxyParams}{Paramètres}
{\em list\-Medecin\-Json} & \-: l'objet c\-Json dans lequel on écrit la liste de médecins, c'est un tableau \\
\hline
{\em l} & \-: la liste de médecins à écrire \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
1 si tout s'est bien passé 0 si une des étapes a échoué 
\end{DoxyReturn}
On gère la liste des patients recus \-: on crée un tableau, on parcourt la liste des patients recus et à chaque patient on crée un string avec son numéro de sécurité sociale puis on ajoute ce string au tableau que l'on vient de créer et à la fin du parcours de la liste on ajoute notre tableau à son médecin

E\-D\-I\-T \-: P\-O\-U\-R L\-A V0 O\-N N\-E M\-E\-T P\-A\-S L\-E\-S P\-A\-T\-I\-E\-N\-T\-S R\-E\-C\-U\-S \-: T\-R\-O\-P G\-A\-L\-E\-R\-E, O\-N A\-J\-O\-U\-T\-E\-R\-A L\-E\-S C\-O\-U\-P\-L\-E\-S P\-A\-T\-I\-E\-N\-T / M\-E\-D\-E\-C\-I\-N D\-E\-P\-U\-I\-S L\-E\-S R\-D\-V\hypertarget{_json_save_8c_a3bea4ff78d8287423643ba3e76f155cd}{\index{Json\-Save.\-c@{Json\-Save.\-c}!List\-Patient\-\_\-json\-Load@{List\-Patient\-\_\-json\-Load}}
\index{List\-Patient\-\_\-json\-Load@{List\-Patient\-\_\-json\-Load}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{List\-Patient\-\_\-json\-Load}]{\setlength{\rightskip}{0pt plus 5cm}int List\-Patient\-\_\-json\-Load (
\begin{DoxyParamCaption}
\item[{c\-J\-S\-O\-N $\ast$}]{project\-Json, }
\item[{{\bf List\-Medecin} $\ast$}]{project\-\_\-working\-Medecins, }
\item[{{\bf List\-Patient} $\ast$}]{l\-P}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_a3bea4ff78d8287423643ba3e76f155cd}
\hypertarget{_json_save_8c_ad49c020d48062643c39895ecc2d28e4f}{\index{Json\-Save.\-c@{Json\-Save.\-c}!List\-Patient\-\_\-json\-Save@{List\-Patient\-\_\-json\-Save}}
\index{List\-Patient\-\_\-json\-Save@{List\-Patient\-\_\-json\-Save}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{List\-Patient\-\_\-json\-Save}]{\setlength{\rightskip}{0pt plus 5cm}int List\-Patient\-\_\-json\-Save (
\begin{DoxyParamCaption}
\item[{c\-J\-S\-O\-N $\ast$}]{list\-Patient\-Json, }
\item[{{\bf List\-Patient} $\ast$}]{l}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_ad49c020d48062643c39895ecc2d28e4f}
List\-Patient\-\_\-json\-Save \-: fonction qui écrit dans un objet c\-Json une liste de patient Chaque patient possédant un dossier médical possédant lui même une liste de medecins consultes et une liste d'ordonnances On écrira directement ces infos dans le patient (pour éviter la création d'une liste de dossier médicaux inutile) Et on écrira uniquement l'I\-D des medecins consultes (= leur numéro R\-P\-S) dans cette liste de medecin dans patient Puis un tableau d'ordonnances représentant la liste des ordonnaces du dossier médical du patient 
\begin{DoxyParams}{Paramètres}
{\em list\-Patient\-Json} & \-: l'objet c\-Json dans lequel on écrit la liste de patient, c'est un tableau \\
\hline
{\em l} & \-: la liste de patients à save \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
1 si tout s'est bien passé 0 si une des étapes a échoué 
\end{DoxyReturn}
On gère la liste des medecins consultes \-: on crée un tableau, on parcourt la liste des medecins consultes et à chaque medecin on crée un string avec son numéro\-\_\-\-R\-P\-S puis on ajoute ce string au tableau que l'on vient de créer et à la fin du parcours de la liste on ajoute notre tableau à son patient

E\-D\-I\-T \-: P\-O\-U\-R L\-A V0 O\-N N\-E M\-E\-T P\-A\-S L\-E\-S M\-E\-D\-E\-C\-I\-N\-S C\-O\-N\-S\-U\-L\-T\-E\-S \-: T\-R\-O\-P G\-A\-L\-E\-R\-E, O\-N A\-J\-O\-U\-T\-E\-R\-A L\-E\-S C\-O\-U\-P\-L\-E\-S P\-A\-T\-I\-E\-N\-T / M\-E\-D\-E\-C\-I\-N D\-E\-P\-U\-I\-S L\-E\-S R\-D\-V

On gère la liste d'ordonnances du dossier médical de notre patient\hypertarget{_json_save_8c_afe4c4f44b2d76f6636292c34aa2d261c}{\index{Json\-Save.\-c@{Json\-Save.\-c}!print\-Project@{print\-Project}}
\index{print\-Project@{print\-Project}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{print\-Project}]{\setlength{\rightskip}{0pt plus 5cm}void print\-Project (
\begin{DoxyParamCaption}
\item[{{\bf Project} $\ast$}]{p}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_afe4c4f44b2d76f6636292c34aa2d261c}
print\-Project \-: Affiche dans la console toutes les données d'un projet 
\begin{DoxyParams}{Paramètres}
{\em p} & \-: le projet à afficher \\
\hline
\end{DoxyParams}
\hypertarget{_json_save_8c_ab8a5a77e70ea005cf7878c0c228bd03a}{\index{Json\-Save.\-c@{Json\-Save.\-c}!Project\-\_\-json\-Load@{Project\-\_\-json\-Load}}
\index{Project\-\_\-json\-Load@{Project\-\_\-json\-Load}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{Project\-\_\-json\-Load}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Project}$\ast$ Project\-\_\-json\-Load (
\begin{DoxyParamCaption}
\item[{const char $\ast$const}]{content}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_ab8a5a77e70ea005cf7878c0c228bd03a}
Project\-\_\-json\-Load \-: Crée un objet project depuis un char$\ast$ au format J\-S\-O\-N 
\begin{DoxyParams}{Paramètres}
{\em content} & \-: le char$\ast$ avec les données du projet \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
un pointeur sur le projet créé si tout s'est bien passé N\-U\-L\-L si un erreur a eu lieu (Cf c\-J\-S\-O\-N) 
\end{DoxyReturn}
\hypertarget{_json_save_8c_a966e383a442f97746ebb82704990d54c}{\index{Json\-Save.\-c@{Json\-Save.\-c}!Project\-\_\-json\-Save@{Project\-\_\-json\-Save}}
\index{Project\-\_\-json\-Save@{Project\-\_\-json\-Save}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{Project\-\_\-json\-Save}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ Project\-\_\-json\-Save (
\begin{DoxyParamCaption}
\item[{{\bf Project} $\ast$}]{project}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_a966e383a442f97746ebb82704990d54c}
Project\-\_\-json\-Save \-: Fonction permettant de sauvegarder un objet projet dans un fichier .json à l'aide de la librairie cjson 
\begin{DoxyParams}{Paramètres}
{\em p} & \-: l'instance de projet à save \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
un string qui sera écrit dans un fichier texte 
\end{DoxyReturn}
\hypertarget{_json_save_8c_a1ec8960dcf28186191a304cdc4829573}{\index{Json\-Save.\-c@{Json\-Save.\-c}!supports\-\_\-full\-\_\-hd@{supports\-\_\-full\-\_\-hd}}
\index{supports\-\_\-full\-\_\-hd@{supports\-\_\-full\-\_\-hd}!JsonSave.c@{Json\-Save.\-c}}
\subsubsection[{supports\-\_\-full\-\_\-hd}]{\setlength{\rightskip}{0pt plus 5cm}int supports\-\_\-full\-\_\-hd (
\begin{DoxyParamCaption}
\item[{const char $\ast$const}]{monitor}
\end{DoxyParamCaption}
)}}\label{_json_save_8c_a1ec8960dcf28186191a304cdc4829573}
Exemple de c\-J\-S\-O\-N sur leur git 